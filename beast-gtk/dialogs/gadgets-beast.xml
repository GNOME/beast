<?xml version="1.0" encoding="UTF-8"?>		<!--*-mode: xml;-*-->
<gxk-gadget-definitions
  xmlns:xdef="http://beast.gtk.org/xmlns:xdef"
  xmlns:prop="http://beast.gtk.org/xmlns:prop"
  xmlns:pack="http://beast.gtk.org/xmlns:pack"
  xmlns:default-pack="http://beast.gtk.org/xmlns:default-pack"
  xmlns:size="http://beast.gtk.org/xmlns:size" >
  
  <!-- misc BEAST widgets -->
  <xdef:piano-roll    inherit="BstPianoRoll" />
  <xdef:pattern-view  inherit="BstPatternView" />
  <xdef:zoomed-window inherit="BstZoomedWindow" />
  <xdef:event-roll    inherit="BstEventRoll" />
  
  <!-- track view -->
  <xdef:track-view inherit="BstTrackView" border-width="3" >
    <hbox spacing="3" >
      <hpaned height="120" position="240" pack:expand="1" >
	<vbox spacing="3" >
	  <alignment xscale="0" xalign="0" >
	    <hbox homogeneous="1" spacing="3" size:vgroup="toolbar-size" >
	      <big-button-factory actions="track-view-actions" />
	    </hbox>
	  </alignment>
	  <frame-shadow-in size:vgroup="tree-size" pack:expand="1" >
	    <tree-view name="tree-view" height="120" width="200" />
	  </frame-shadow-in>
	  <hscrollbar name="tree-hscrollbar" size:vgroup="scroll-size" />
	</vbox>
	<vbox spacing="3" >
	  <toolbar size:vgroup="toolbar-size" >
	    <tool-toggle-factory actions="tctrl-canvas-tools" relief="none" />
	    <tool-separator pack:padding="2" />
	    <action-toggle name="repeat-toggle" comment="FIXME: this should really be done via pspec publishing"
	      _action-name="Repeat"
	      _action-tooltip="Repeat playback within loop points"
	      image-size="big-button"
	      action-stock="BST_STOCK_REPEAT"
	      relief="none"
	      />
	    <menu-button focus="0" relief="none" size:hgroup="menu-buttons" stock-size="big-button" >
	      <popup-menu >
		<menu-factory actions="tctrl-hpanel-tools" />
	      </popup-menu>
	    </menu-button>
	    <tool-separator pack:padding="2" />
	    <menu-button focus="0" relief="none" size:hgroup="menu-buttons" stock-size="big-button" >
	      <popup-menu >
		<menu-factory actions="tctrl-quant-tools" />
	      </popup-menu>
	    </menu-button>
	    <tool-separator pack:padding="2" />
	    <tool-area name="hzoom-area" _tooltip="Horizontal track zoom" >
	      <ulabel area="label-area"
		_label="HZoom" />
	    </tool-area>
	  </toolbar>
	  <frame-shadow-in name="track-area" size:vgroup="tree-size" pack:expand="1" />
	  <hscrollbar name="track-hscrollbar" size:vgroup="scroll-size" />
	</vbox>
      </hpaned>
      <vbox spacing="3" >
	<alignment size:vgroup="toolbar-size" />
	<vscrollbar name="tree-vscrollbar" size:vgroup="tree-size" pack:expand="1" />
	<alignment size:vgroup="scroll-size" />
      </vbox>
    </hbox>
  </xdef:track-view>
  
  <!-- rack view -->
  <xdef:rack-view inherit="vbox" border-width="3" >
    <vbox spacing="3" expand="1" >
      <toggle-button label="_Edit" name="edit-toggle" />
      <event-box name="rack-table-event-box" events="button-press-mask" expand="1" >
	<rack-table >
	  <popup-menu name="rack-view-popup" >
	    <menu-title _label="Virtual Rack" />
	    <menu-separator />
	    <menu-factory action-root="" actions="rack-view-popup-actions" />
	  </popup-menu>
	</rack-table>
      </event-box>
    </vbox>
  </xdef:rack-view>

  <!-- modules-popup -->
  <xdef:modules-popup inherit="popup-menu" >
    <menu-title _label="Synthesis Modules" />
    <menu-separator />
    <submenu _label="_Utilities" stock-image="gtk-execute" >
      <menu-factory action-root="$(if,$root,,:xdef)" actions="router-util-actions" />
    </submenu>
    <menu-factory action-root="$(if,$root,,:xdef)"   actions="router-canvas-tools" />
    <menu-factory action-root="$(if,$root,,:xdef)"   actions="router-module-actions" >
      <factory-branch _label="_Audio Sources" />
      <factory-branch _label="_Other Sources" />
      <factory-branch _label="_Routing" />
      <factory-branch _label="_Spatial" />
      <factory-branch _label="_Filters" />
      <factory-branch _label="_Enhance" />
      <factory-branch _label="_Distortion" />
      <factory-branch _label="_LADSPA" hidden="1" />
      <factory-branch _label="_Virtualization" />
      <factory-branch _label="_Input &amp; Output" />
      <factory-branch _label="E_xamples" hidden="1" />
      <factory-branch _label="_Misc" hidden="1" />
    </menu-factory>
  </xdef:modules-popup>

  <!-- snet view -->
  <xdef:snet-view inherit="vbox" border-width="3" >
    <vbox spacing="3" expand="1" >
      <toolbar size:vgroup="toolbar-size" >
	<tool-toggle-factory actions="router-canvas-tools" relief="none" />
	<tool-toggle-factory actions="router-toolbar-modules" relief="none" />
	<tool-separator pack:padding="2" />
	<tool-button-factory actions="router-toolbar-actions" relief="none" />
	<tool-separator pack:padding="2" />
	<tool-area name="zoom-area" _tooltip="Adjust the zoom factor of the router display" >
	  <ulabel area="label-area" _label="Zoom" />
	</tool-area>
	<tool-separator pack:padding="2" />
	<tool-text-toggle-factory actions="router-channel-toggle" relief="none" yalign="0.5" />
      </toolbar>
      <zoomed-window expand="1" >
	<modules-popup name="snet-popup" />
      </zoomed-window>
    </vbox>
  </xdef:snet-view>

  <!-- snet-palette -->
  <xdef:snet-palette inherit="vbox" >
    <hwrap expand="1" aspect-ratio="0.5" >
      <palette-toggle-factory action-root="" actions="router-canvas-tools"
	force-resize-hsteps="1" force-resize-vsteps="1"
	min-resize-hunits="2" min-resize-vunits="3" />
      <palette-toggle-factory action-root="" actions="router-palette-modules" />
      <vbox wrapped="1" expand="1" >
	<hbox>
	  <menu-button show-selection="0" focus="0" >
	    <arrow arrow="right" />
	    <modules-popup name="snet-popup" root="1" />
	  </menu-button>
	  <label name="type-label" expand="1" />
	</hbox>
	<frame-etched-in expand="1" border-width="3" >
	  <alignment name="text-area" border-width="2" />
	</frame-etched-in>
      </vbox>
    </hwrap>
  </xdef:snet-palette>

  <!-- wave view -->
  <xdef:wave-view inherit="BstWaveView" border-width="3" >
    <hbox spacing="3" >
      <scrolled-window name="tree-area" shadow-type="shadow-in" pack:expand="1" >
	<tree-view name="tree-view" height="120" width="200" />
      </scrolled-window>
      <alignment yscale="0" yalign="0" >
	<vbox homogeneous="1" spacing="3" >
	  <big-button-factory actions="wave-view-actions" />
	</vbox>
      </alignment>
    </hbox>
  </xdef:wave-view>
  
  <!-- part view -->
  <xdef:part-view inherit="BstPartView" border-width="3" >
    <vpaned>
      <hbox spacing="3" >
	<scrolled-window name="tree-area" shadow-type="shadow-in" pack:expand="1" >
	  <tree-view name="tree-view" height="120" width="200" />
	</scrolled-window>
	<alignment yscale="0" yalign="0" >
	  <vbox homogeneous="1" spacing="3" >
	    <big-button-factory actions="part-view-actions" />
	  </vbox>
	</alignment>
      </hbox>
      <alignment name="property-area" />
    </vpaned>
  </xdef:part-view>

  <!-- piano-roll-box -->
  <xdef:piano-roll-box inherit="vbox" spacing="3" >
    <vbox name="toolbar-area" area="north" >
      <toolbar >
	<tool-toggle-factory action-root="" actions="pctrl-canvas-tools" relief="none" />
	<tool-separator pack:padding="2" />
	<tool-button-factory action-root="" actions="piano-edit-actions" relief="none" />
	<tool-separator pack:padding="2" />
	<menu-button focus="0" relief="none" size:hgroup="menu-buttons" stock-size="big-button" >
	  <popup-menu >
	    <menu-factory action-root="" actions="pctrl-quant-tools" />
	  </popup-menu>
	</menu-button>
	<menu-button focus="0" relief="none" size:hgroup="menu-buttons" stock-size="big-button" >
	  <popup-menu >
	    <menu-factory action-root="" actions="pctrl-note-tools" />
	  </popup-menu>
	</menu-button>
	<tool-separator pack:padding="2" />
	<tool-area name="hzoom-area" _tooltip="Horizontal piano zoom" >
	  <ulabel area="label-area"
	    _label="HZoom" />
	</tool-area>
	<tool-area name="vzoom-area" _tooltip="Vertical piano zoom" >
	  <ulabel area="label-area"
	    _label="VZoom" />
	</tool-area>
      </toolbar>
    </vbox>
    <notebook pack:expand="1">
      <vbox>
	<hbox spacing="2" border-width="2" >
	  <hbox name="pattern-control-box" spacing="2" />
	  <hstock-button name="configure-button" pack:pack-type="end"
	    _label="Configure" stock="BST_STOCK_EDIT"
	    _tooltip="Configure the column layout of the pattern editor" />
	</hbox>
	<hbox pack:expand="1" >
	  <frame-shadow-in pack:expand="1" >
	    <pattern-view />
	  </frame-shadow-in>
	  <vscrollbar name="pattern-view-vscrollbar" size:hgroup="scroll-size" />
	</hbox>
	<hbox >
	  <hscrollbar name="pattern-view-hscrollbar" expand="1" />
	  <alignment size:hgroup="scroll-size" />
	</hbox>
      </vbox>
      <vbox>
	<vpaned name="piano-paned" height="500" position="400" pack:expand="1" >
	  <!--! child1 of the vpaned is meant to expand, but only gtk+-2.4 has
	  !   ! child properties on paned, so C code patches up "piano-paned"
	  -->
	  <hbox >
	    <frame-shadow-in pack:expand="1" >
	      <piano-roll height="200" >
		<popup-menu name="piano-popup" >
		  <menu-title _label="Piano Notes" />
		  <menu-separator />
		  <submenu _label="_Tools" >
		    <menu-factory action-root="" actions="pctrl-canvas-tools" />
		  </submenu>
		  <submenu _label="_Edit" >
		    <menu-factory action-root="" actions="piano-edit-actions" />
		    <menu-factory action-root="" actions="piano-edit-undo" separator="1" />
		    <menu-factory action-root="" actions="piano-clear-undo" />
		  </submenu>
		  <submenu _label="_Quantization" >
		    <menu-factory action-root="" actions="pctrl-quant-tools" />
		  </submenu>
		  <submenu _label="Note _Length" >
		    <menu-factory action-root="" actions="pctrl-note-tools" />
		  </submenu>
		  <menu-action-separator action-root="" actions="part-scripts" />
		  <submenu _label="_Utilities" hidden-when-insensitive="1" >
		    <menu-tearoff />
		    <menu-factory action-root="" actions="part-scripts" />
		  </submenu>
		</popup-menu>
	      </piano-roll>
	    </frame-shadow-in>
	    <vscrollbar name="piano-roll-vscrollbar" size:hgroup="scroll-size" />
	  </hbox>
	  <hbox >
	    <vbox spacing="3" pack:expand="1" >
	      <frame-shadow-in pack:expand="1" >
		<event-roll height="50" >
		  <popup-menu name="event-popup" >
		    <menu-title _label="Events" />
		    <menu-separator />
		    <submenu _label="_Tools" >
		      <menu-factory action-root="" actions="pctrl-canvas-tools" />
		    </submenu>
		    <submenu _label="_Edit" >
		      <menu-factory action-root="" actions="piano-edit-actions" />
		      <menu-factory action-root="" actions="piano-edit-undo" separator="1" />
		      <menu-factory action-root="" actions="piano-clear-undo" />
		    </submenu>
		    <submenu _label="_Quantization" >
		      <menu-factory action-root="" actions="pctrl-quant-tools" />
		    </submenu>
		  </popup-menu>
		</event-roll>
	      </frame-shadow-in>
	      <hbox>
		<label _label="Control Type:" expand="1" />
		<alignment name="event-roll-control-area" />
	      </hbox>
	    </vbox>
	    <alignment size:hgroup="scroll-size" />
	  </hbox>
	</vpaned>
	<hbox>
	  <vbox expand="1" spacing="1" >
	    <hscrollbar name="piano-roll-hscrollbar" />
	    <hbox homogeneous="1" spacing="3" >
	      <hscale name="piano-roll-hzoom-scale" >
		<tooltip _text="Horizontal piano zoom" />
	      </hscale>
	      <hscale name="piano-roll-hscale" >
		<tooltip _text="Adjust right view boundary" />
	      </hscale>
	    </hbox>
	  </vbox>
	  <alignment size:hgroup="scroll-size" />
	</hbox>
      </vbox>
    </notebook>
  </xdef:piano-roll-box>

  <!-- pattern editor layout dialog -->
  <xdef:pattern-editor-layout-box inherit="vbox" spacing="3" border-width="3" >
    <frame expand="1" >
      <alignment name="sctext-box" expand="1" />
    </frame>
    <hbox>
      <label _label="Layout:" />
      <entry name="layout-entry" expand="1" />
    </hbox>
    <hseparator/>
    <hbox spacing="3" homogeneous="1" >
      <hstock-button name="apply-button" _label="_Apply" stock="gtk-apply" can-default="1"
	_tooltip="Aplly configuration changes to the pattern editor layout" />
      <hstock-button name="cancel-button" _label="_Cancel" stock="gtk-cancel" can-default="1"
	_tooltip="Discard changes and close dialog" />
    </hbox>
  </xdef:pattern-editor-layout-box>

  <!-- pattern editor keybinding dialog -->
  <xdef:key-bindings-box inherit="vbox" >
    <vbox spacing="3" expand="1" >
      <scrolled-window shadow-type="shadow-in" pack:expand="1"
	hscrollbar-policy="automatic" >
	<tree-view name="binding-tree-view" />
      </scrolled-window>
      <alignment xscale="0" >
	<hbox spacing="3" >
	  <big-button-factory actions="key-bindings-actions" can-focus="1" />
	</hbox>
      </alignment>
      <scrolled-window shadow-type="shadow-in" pack:expand="1"
	hscrollbar-policy="automatic" >
	<tree-view name="function-tree-view" />
      </scrolled-window>
    </vbox>
  </xdef:key-bindings-box>

  <!-- beast-menubar -->
  <xdef:beast-menubar inherit="menubar" >
    <submenu _label="_File">
      <menu-tearoff />
      <menu-factory action-root="" actions="file-open" />
      <menu-factory action-root="" actions="file-save" separator="1" />
      <menu-factory action-root="" actions="preference" separator="1" />
      <menu-factory action-root="" actions="file-epilog" separator="1" />
    </submenu>
    <submenu _label="_Edit">
      <menu-tearoff />
      <menu-factory action-root="" actions="undo" />
      <menu-factory action-root="" actions="undo-dvl" />
      <menu-factory action-root="" actions="preference" separator="1" />
    </submenu>
    <submenu _label="_View">
      <menu-tearoff />
      <menu-factory action-root="" actions="dialog" />
      <menu-separator/>
      <submenu _label="_Skins" >
	<menu-tearoff />
	<menu-factory action-root="" actions="skin-options" />
      </submenu>
      <menu-factory action-root="" actions="preference" separator="1" />
      <menu-factory action-root="" actions="rebuild" separator="1" />
    </submenu>
    <submenu _label="_Project">
      <menu-tearoff />
      <menu-factory action-root="" actions="playback" />
      <menu-factory action-root="" actions="project" separator="1" />
    </submenu>
    <submenu _label="_Synthesizers">
      <menu-tearoff />
      <menu-factory action-root="" actions="library-files" />
    </submenu>
    <submenu _label="_Tools">
      <menu-tearoff />
      <submenu _label="_Song" name="song-submenu" >
	<menu-factory action-root="" actions="tools-song" />
      </submenu>
      <submenu _label="_Synth" name="synth-submenu" >
	<menu-factory action-root="" actions="tools-synth" />
      </submenu>
      <submenu _label="Wave_s" name="waves-submenu" >
	<menu-factory action-root="" actions="tools-wave-repo" />
      </submenu>
      <menu-factory action-root="" actions="tools-project" />
    </submenu>
    <submenu _label="_Demo">
      <menu-tearoff />
      <menu-factory action-root="" actions="demo-songs" />
    </submenu>
    <submenu-last _label="_Help">
      <menu-tearoff />
      <menu-factory action-root="" actions="simple-help" />
      <submenu _label="Development">
	<menu-factory action-root="" actions="devel-help" />
      </submenu>
      <menu-factory action-root="" actions="about" separator="1" />
    </submenu-last>
  </xdef:beast-menubar>
  
  <!-- application-box -->
  <xdef:application-box inherit="border-layout" >
    <vbox name="menu-area" area="north" >
      <beast-menubar />
    </vbox>
    <vbox name="toolbar-area" area="north" />
    <left-deck name="main-notebook" pack:expand="1" />
    <hbox name="control-area" area="north" />
  </xdef:application-box>

</gxk-gadget-definitions>
