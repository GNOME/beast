<?xml version="1.0" encoding="UTF-8"?>		<!--*-mode: xml;-*-->
<gxk-gadget-definitions xmlns:xdef="http://beast.gtk.org/xmlns:xdef" >
  
  <!-- misc BEAST widgets -->
  <xdef:piano-roll inherit="BstPianoRoll" />
  <xdef:zoomed-window inherit="BstZoomedWindow" />
  <xdef:event-roll inherit="BstEventRoll" />
  
  <!-- track view -->
  <xdef:track-view inherit="BstTrackView" prop:border-width="3" >
    <hbox spacing="3" >
      <hpaned prop:height-request="120" prop:position="240" pack:expand="1" >
	<vbox spacing="3" >
	  <alignment prop:xscale="0" prop:xalign="0" >
	    <hbox prop:homogeneous="1" spacing="3" size:vgroup="toolbar-size" >
	      <big-button-factory actions="track-view-actions" />
	    </hbox>
	  </alignment>
	  <frame-shadow-in size:vgroup="tree-size" pack:expand="1" >
	    <tree-view name="tree-view" prop:rules-hint="1" prop:height-request="120" prop:width-request="200" />
	  </frame-shadow-in>
	  <hscrollbar name="tree-hscrollbar" size:vgroup="scroll-size" />
	</vbox>
	<vbox spacing="3" >
	  <frame-shadow-out name="toolbar-area" size:vgroup="toolbar-size" >
	    <hbox name="toolbar" >
	      <tool-toggle-factory actions="tctrl-canvas-tools" relief="none" />
	      <tool-separator pack:padding="2" />
	      <action-toggle name="repeat-toggle" comment="FIXME: this should really be done via pspec publishing"
		_action-name="Repeat"
		_action-tooltip="Repeat playback within loop points"
		image-size="big-button"
		action-stock="BST_STOCK_REPEAT"
		relief="none"
		/>
	      <menu-button focus="0" relief="none" size:hgroup="menu-buttons" stock-size="big-button" >
		<popup-menu >
		  <menu-factory actions="tctrl-hpanel-tools" />
		</popup-menu>
	      </menu-button>
              <tool-separator pack:padding="2" />
	      <menu-button focus="0" relief="none" size:hgroup="menu-buttons" stock-size="big-button" >
		<popup-menu >
		  <menu-factory actions="tctrl-quant-tools" />
		</popup-menu>
	      </menu-button>
	      <tool-separator pack:padding="2" />
	      <tool-area name="hzoom-area" _tooltip="Horizontal track zoom" >
		<label area="label-area"
		  _label="HZoom" />
	      </tool-area>
	    </hbox>
	  </frame-shadow-out>
	  <frame-shadow-in name="track-area" size:vgroup="tree-size" pack:expand="1" />
	  <hscrollbar name="track-hscrollbar" size:vgroup="scroll-size" />
	</vbox>
      </hpaned>
      <vbox spacing="3" >
	<alignment size:vgroup="toolbar-size" />
	<vscrollbar name="tree-vscrollbar" size:vgroup="tree-size" pack:expand="1" />
	<alignment size:vgroup="scroll-size" />
      </vbox>
    </hbox>
  </xdef:track-view>

  <!-- modules-popup -->
  <xdef:modules-popup inherit="popup-menu" >
    <menu-title _label="Utilities" />
    <menu-factory actions="router-util-actions" >
      <factory-branch _label="_Utils" stock-image="gtk-execute" hidden="1" />
    </menu-factory>
    <menu-separator />
    <menu-title _label="Modules" />
    <menu-factory actions="router-canvas-tools" />
    <menu-factory actions="router-module-actions" >
      <factory-branch _label="_Audio Sources" />
      <factory-branch _label="_Other Sources" />
      <factory-branch _label="_Routing" />
      <factory-branch _label="_Spatial" />
      <factory-branch _label="_Filters" />
      <factory-branch _label="_Enhance" />
      <factory-branch _label="_Distortion" />
      <factory-branch _label="_LADSPA" hidden="1" />
      <factory-branch _label="_Virtualization" />
      <factory-branch _label="_Input &amp; Output" />
      <factory-branch _label="E_xamples" hidden="1" />
      <factory-branch _label="_Misc" hidden="1" />
    </menu-factory>
  </xdef:modules-popup>

  <!-- snet view -->
  <xdef:snet-view inherit="vbox" prop:border-width="3" >
    <vbox spacing="3" expand="1" >
      <frame-shadow-out name="toolbar-area" size:vgroup="toolbar-size" >
	<hbox name="toolbar" >
	  <tool-toggle-factory actions="router-canvas-tools" relief="none" />
	  <tool-toggle-factory actions="router-toolbar-modules" relief="none" />
	  <tool-separator pack:padding="2" />
	  <tool-button-factory actions="router-toolbar-actions" relief="none" />
	  <tool-separator pack:padding="2" />
	  <tool-area name="zoom-area" _tooltip="Adjust the zoom factor of the router display" >
	    <label area="label-area" _label="Zoom" />
	  </tool-area>
	  <tool-separator pack:padding="2" />
          <tool-text-toggle-factory actions="router-channel-toggle" relief="none" y-align="1" />
	</hbox>
      </frame-shadow-out>
      <zoomed-window expand="1" >
	<modules-popup name="snet-popup" />
      </zoomed-window>
    </vbox>
  </xdef:snet-view>

  <!-- snet-palette -->
  <xdef:snet-palette inherit="vbox" >
    <hwrap expand="1" prop:aspect-ratio="0.5" >
      <palette-toggle-factory action-root="" actions="router-canvas-tools"
	force-resize-hsteps="1" force-resize-vsteps="1"
	min-resize-hunits="2" min-resize-vunits="3" />
      <palette-toggle-factory action-root="" actions="router-palette-modules" />
      <vbox wrapped="1" expand="1" >
	<hbox>
	  <menu-button prop:show-selection="0" focus="0" >
	    <arrow arrow="right" />
	    <modules-popup name="snet-popup" />
	  </menu-button>
	  <label name="type-label" expand="1" />
	</hbox>
	<frame-etched-in expand="1" prop:border_width="3" >
	  <alignment name="text-area" prop:border_width="2" />
	</frame-etched-in>
      </vbox>
    </hwrap>
  </xdef:snet-palette>

  <!-- wave view -->
  <xdef:wave-view inherit="BstWaveView" prop:border-width="3" >
    <hbox spacing="3" >
      <scrolled-window name="tree-area" prop:shadow-type="shadow-in" pack:expand="1" >
	<tree-view name="tree-view" prop:rules-hint="1" prop:height-request="120" prop:width-request="200" />
      </scrolled-window>
      <alignment prop:yscale="0" prop:yalign="0" >
	<vbox prop:homogeneous="1" spacing="3" >
	  <big-button-factory actions="wave-view-actions" />
	</vbox>
      </alignment>
    </hbox>
  </xdef:wave-view>
  
  <!-- part view -->
  <xdef:part-view inherit="BstPartView" prop:border-width="3" >
    <vpaned>
      <hbox spacing="3" >
	<scrolled-window name="tree-area" prop:shadow-type="shadow-in" pack:expand="1" >
	  <tree-view name="tree-view" prop:rules-hint="1" prop:height-request="120" prop:width-request="200" />
	</scrolled-window>
	<alignment prop:yscale="0" prop:yalign="0" >
	  <vbox prop:homogeneous="1" spacing="3" >
	    <big-button-factory actions="part-view-actions" />
	  </vbox>
	</alignment>
      </hbox>
      <alignment name="property-area" />
    </vpaned>
  </xdef:part-view>

  <!-- piano-roll-box -->
  <xdef:piano-roll-box inherit="vbox" prop:spacing="3" >
    <vbox name="toolbar-area" area="north" >
      <frame-shadow-out >
	<hbox name="toolbar" >
	  <tool-toggle-factory action-root="" actions="pctrl-canvas-tools" relief="none" />
	  <tool-separator pack:padding="2" />
	  <tool-button-factory action-root="" actions="piano-edit-actions" relief="none" />
	  <tool-separator pack:padding="2" />
	  <menu-button focus="0" relief="none" size:hgroup="menu-buttons" stock-size="big-button" >
	    <popup-menu >
	      <menu-factory action-root="" actions="pctrl-quant-tools" />
	    </popup-menu>
	  </menu-button>
	  <menu-button focus="0" relief="none" size:hgroup="menu-buttons" stock-size="big-button" >
	    <popup-menu >
	      <menu-factory action-root="" actions="pctrl-note-tools" />
	    </popup-menu>
	  </menu-button>
          <tool-separator pack:padding="2" />
	  <tool-area name="hzoom-area" _tooltip="Horizontal piano zoom" >
            <label area="label-area"
	      _label="HZoom" />
	  </tool-area>
          <tool-area name="vzoom-area" _tooltip="Vertical piano zoom" >
	    <label area="label-area"
	      _label="VZoom" />
	  </tool-area>
	</hbox>
      </frame-shadow-out>
    </vbox>
    <vpaned name="piano-paned" prop:height-request="500" prop:position="400" pack:expand="1" >
      <!--! child1 of the vpaned is meant to expand, but only gtk+-2.4 has
      !   ! child properties on paned, so C code patches up "piano-paned"
      -->
      <hbox spacing="3" >
	<frame-shadow-in pack:expand="1" >
	  <piano-roll prop:height-request="200" >
	    <popup-menu name="piano-popup" >
	      <menu-title _label="Piano Notes" />
	      <menu-separator />
	      <submenu _label="_Tools" >
		<menu-factory action-root="" actions="pctrl-canvas-tools" />
	      </submenu>
	      <submenu _label="_Edit" >
		<menu-factory action-root="" actions="piano-edit-actions" />
		<menu-factory action-root="" actions="piano-edit-undo" separator="1" />
	      </submenu>
	      <submenu _label="_Quantization" >
		<menu-factory action-root="" actions="pctrl-quant-tools" />
	      </submenu>
	      <submenu _label="Note _Length" >
		<menu-factory action-root="" actions="pctrl-note-tools" />
	      </submenu>
	    </popup-menu>
	    <popup-menu name="event-popup" >
              <menu-title _label="Events" />
	      <menu-separator />
	      <submenu _label="_Tools" >
		<menu-factory action-root="" actions="pctrl-canvas-tools" />
	      </submenu>
	      <submenu _label="_Edit" >
		<menu-factory action-root="" actions="piano-edit-actions" />
		<menu-factory action-root="" actions="piano-edit-undo" separator="1" />
	      </submenu>
	      <submenu _label="_Quantization" >
		<menu-factory action-root="" actions="pctrl-quant-tools" />
	      </submenu>
	    </popup-menu>
	  </piano-roll>
	</frame-shadow-in>
	<vscrollbar name="piano-roll-vscrollbar" size:hgroup="scroll-size" />
      </hbox>
      <hbox spacing="3" >
	<vbox spacing="3" pack:expand="1" >
	  <frame-shadow-in pack:expand="1" >
	    <event-roll prop:height-request="50" />
	  </frame-shadow-in>
	  <hbox>
	    <label _label="Control Type:" expand="1" />
	    <alignment name="event-roll-control-area" />
	  </hbox>
	</vbox>
	<alignment size:hgroup="scroll-size" />
      </hbox>
    </vpaned>
    <hbox>
      <hscrollbar name="piano-roll-hscrollbar" expand="1" />
      <alignment size:hgroup="scroll-size" />
    </hbox>
  </xdef:piano-roll-box>
  
  <!-- beast-menubar -->
  <xdef:beast-menubar inherit="menubar" >
    <submenu _label="_File">
      <menu-tearoff />
      <menu-factory action-root="" actions="file-open" />
      <menu-factory action-root="" actions="file-save" separator="1" />
      <menu-factory action-root="" actions="preference" separator="1" />
      <menu-factory action-root="" actions="file-epilog" separator="1" />
    </submenu>
    <submenu _label="_Edit">
      <menu-tearoff />
      <menu-factory action-root="" actions="undo" />
      <menu-factory action-root="" actions="undo-dvl" />
      <menu-factory action-root="" actions="preference" separator="1" />
    </submenu>
    <submenu _label="_View">
      <menu-tearoff />
      <menu-factory action-root="" actions="dialog" />
      <menu-factory action-root="" actions="preference" separator="1" />
      <menu-factory action-root="" actions="rebuild" separator="1" />
    </submenu>
    <submenu _label="_Project">
      <menu-tearoff />
      <menu-factory action-root="" actions="playback" />
      <menu-factory action-root="" actions="project" separator="1" />
    </submenu>
    <submenu _label="_Synthesizers">
      <menu-tearoff />
      <menu-factory action-root="" actions="library-files" />
    </submenu>
    <submenu _label="_Tools">
      <menu-tearoff />
      <submenu _label="_Song" name="song-submenu" >
	<menu-factory action-root="" actions="tools-song" />
      </submenu>
      <submenu _label="_Synth" name="synth-submenu" >
	<menu-factory action-root="" actions="tools-synth" />
      </submenu>
      <submenu _label="Wave_s" name="waves-submenu" >
	<menu-factory action-root="" actions="tools-wave-repo" />
      </submenu>
      <menu-factory action-root="" actions="tools-project" />
    </submenu>
    <submenu _label="_Demo">
      <menu-tearoff />
      <menu-factory action-root="" actions="demo-songs" />
    </submenu>
    <submenu-last _label="_Help">
      <menu-tearoff />
      <menu-factory action-root="" actions="simple-help" />
      <submenu _label="Development">
	<menu-factory action-root="" actions="devel-help" />
      </submenu>
      <menu-factory action-root="" actions="about" separator="1" />
    </submenu-last>
  </xdef:beast-menubar>
  
  <!-- application-box -->
  <xdef:application-box inherit="border-layout" >
    <vbox name="menu-area" area="north" >
      <beast-menubar />
    </vbox>
    <vbox name="toolbar-area" area="north" />
    <left-deck name="main-notebook" pack:expand="1" />
    <hbox name="control-area" area="north" />
  </xdef:application-box>

</gxk-gadget-definitions>
