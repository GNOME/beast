<?xml version="1.0" encoding="UTF-8"?>		<!--*-mode: xml;-*-->
<gxk-gadget-definitions xmlns:xdef="http://beast.gtk.org/xmlns:xdef" >
  
  <!-- factory contents: relief= action-*= -->
  <xdef:factory-button inherit="button"
    focus="0"
    prop:relief="$(ifdef,relief,$relief,normal)" >
    <tooltip text="$action-tooltip" />
    <widget-patcher prop:width-from-height="1" />
    <vbox>
      <image
	expand="1"
	stock-image="$action-stock"
	visible="$(ifdef,action-stock,1,0)"
	stock-size="$image-size" />
      <label label="$action-name" />
    </vbox>
  </xdef:factory-button>
  <xdef:factory-toggle-button inherit="toggle-button"
    focus="0" prop:relief="$(ifdef,relief,$relief,normal)" >
    <tooltip text="$action-tooltip" />
    <widget-patcher prop:width-from-height="1" />
    <vbox>
      <image
	expand="1"
	stock-image="$action-stock"
	visible="$(ifdef,action-stock,1,0)"
        stock-size="$image-size" />
      <label label="$action-name" />
    </vbox>
  </xdef:factory-toggle-button>
  <!-- factories: actions= -->
  <xdef:button-factory inherit="gadget-factory"
    per-action="factory-button"
    activatable="factory-button"
    regulate="factory-button" />
  <xdef:big-button-factory inherit="button-factory" image-size="big-button" />
  <xdef:toggle-factory inherit="gadget-factory"
    per-action="factory-toggle-button"
    activatable="factory-toggle-button"
    regulate="factory-toggle-button" />
  <xdef:big-toggle-factory inherit="toggle-factory" image-size="big-button" />
  
  <!-- misc BEAST widgets -->
  <xdef:piano-roll inherit="BstPianoRoll" />
  <xdef:event-roll inherit="BstEventRoll" />
  
  <!-- track view -->
  <xdef:track-view inherit="BstTrackView" prop:visible="1" prop:border-width="3" >
    <hbox spacing="3" >
      <hpaned prop:height-request="120" prop:position="240" pack:expand="1" >
	<vbox spacing="3" >
	  <alignment prop:xscale="0" prop:xalign="0" >
	    <hbox prop:homogeneous="1" spacing="3" size:vgroup="toolbar-size" >
	      <big-button-factory actions="track-view-actions" />
	    </hbox>
	  </alignment>
	  <frame-shadow-in size:vgroup="tree-size" pack:expand="1" >
	    <tree-view name="tree-view" prop:rules-hint="1" prop:height-request="120" prop:width-request="200" />
	  </frame-shadow-in>
	  <hscrollbar name="tree-hscrollbar" size:vgroup="scroll-size" />
	</vbox>
	<vbox spacing="3" >
	  <hbox name="toolbar-area" size:vgroup="toolbar-size" />
	  <frame-shadow-in name="track-area" size:vgroup="tree-size" pack:expand="1" />
	  <hscrollbar name="track-hscrollbar" size:vgroup="scroll-size" />
	</vbox>
      </hpaned>
      <vbox spacing="3" >
	<alignment size:vgroup="toolbar-size" />
	<vscrollbar name="tree-vscrollbar" size:vgroup="tree-size" pack:expand="1" />
	<alignment size:vgroup="scroll-size" />
      </vbox>
    </hbox>
  </xdef:track-view>
  
  <!-- wave view -->
  <xdef:wave-view inherit="BstWaveView" prop:visible="1" prop:border-width="3" >
    <hbox spacing="3" >
      <scrolled-window name="tree-area" prop:shadow-type="shadow-in" pack:expand="1" >
	<tree-view name="tree-view" prop:rules-hint="1" prop:height-request="120" prop:width-request="200" />
      </scrolled-window>
      <alignment prop:yscale="0" prop:yalign="0" >
	<vbox prop:homogeneous="1" spacing="3" >
	  <big-button-factory actions="wave-view-actions" />
	</vbox>
      </alignment>
    </hbox>
  </xdef:wave-view>
  
  <!-- part view -->
  <xdef:part-view inherit="BstPartView" prop:visible="1" prop:border-width="3" >
    <vpaned>
      <hbox spacing="3" >
	<scrolled-window name="tree-area" prop:shadow-type="shadow-in" pack:expand="1" >
	  <tree-view name="tree-view" prop:rules-hint="1" prop:height-request="120" prop:width-request="200" />
	</scrolled-window>
	<alignment prop:yscale="0" prop:yalign="0" >
	  <vbox prop:homogeneous="1" spacing="3" >
	    <big-button-factory actions="part-view-actions" />
	  </vbox>
	</alignment>
      </hbox>
      <alignment name="property-area" />
    </vpaned>
  </xdef:part-view>

  <!-- piano-roll-box -->
  <xdef:piano-roll-box inherit="vbox" prop:spacing="3" >
    <vbox name="toolbar-area" area="north" >
      <frame-shadow-out >
	<hbox name="toolbar" >
	  <big-toggle-factory action-root="" actions="pctrl-canvas-tools" relief="none" />
	  <big-button-factory action-root="" actions="piano-edit-actions" relief="none" />
	</hbox>
      </frame-shadow-out>
    </vbox>
    <vpaned name="piano-paned" prop:height-request="500" prop:position="400" pack:expand="1" >
      <!--! child1 of the vpaned is meant to expand, but only gtk+-2.4 has
      !   ! child properties on paned, so C code patches up "piano-paned"
      -->
      <hbox spacing="3" >
	<frame-shadow-in pack:expand="1" >
	  <piano-roll prop:height-request="200" >
	    <popup-menu name="piano-popup" >
	      <submenu _label="_Tools" >
		<menu-factory action-root="" actions="pctrl-canvas-tools" />
	      </submenu>
	      <submenu _label="_Edit" >
		<menu-factory action-root="" actions="piano-edit-actions" />
		<menu-factory action-root="" actions="piano-edit-undo" separator="1" />
	      </submenu>
	      <submenu _label="_Quantization" >
		<menu-factory action-root="" actions="pctrl-quant-tools" />
	      </submenu>
	      <submenu _label="Note _Length" >
		<menu-factory action-root="" actions="pctrl-note-tools" />
	      </submenu>
	    </popup-menu>
	    <popup-menu name="event-popup" >
	      <submenu _label="_Tools" >
		<menu-factory action-root="" actions="pctrl-canvas-tools" />
	      </submenu>
	      <submenu _label="_Edit" >
		<menu-factory action-root="" actions="piano-edit-actions" />
		<menu-factory action-root="" actions="piano-edit-undo" separator="1" />
	      </submenu>
	      <submenu _label="_Quantization" >
		<menu-factory action-root="" actions="pctrl-quant-tools" />
	      </submenu>
	    </popup-menu>
	  </piano-roll>
	</frame-shadow-in>
	<vscrollbar name="piano-roll-vscrollbar" size:hgroup="scroll-size" />
      </hbox>
      <hbox spacing="3" >
	<vbox spacing="3" pack:expand="1" >
	  <frame-shadow-in pack:expand="1" >
	    <event-roll prop:height-request="50" />
	  </frame-shadow-in>
	  <hbox>
	    <label _label="Control Type:" expand="1" />
	    <alignment name="event-roll-control-area" />
	  </hbox>
	</vbox>
	<alignment size:hgroup="scroll-size" />
      </hbox>
    </vpaned>
    <hbox>
      <hscrollbar name="piano-roll-hscrollbar" expand="1" />
      <alignment size:hgroup="scroll-size" />
    </hbox>
  </xdef:piano-roll-box>
  
  <!-- beast-menubar -->
  <xdef:beast-menubar inherit="menubar" >
    <submenu _label="_File">
      <menu-tearoff />
      <menu-factory action-root="" actions="file-open" />
      <menu-factory action-root="" actions="file-save" separator="1" />
      <menu-factory action-root="" actions="preference" separator="1" />
      <menu-factory action-root="" actions="file-epilog" separator="1" />
    </submenu>
    <submenu _label="_Edit">
      <menu-tearoff />
      <menu-factory action-root="" actions="undo" />
      <menu-factory action-root="" actions="undo-dvl" />
      <menu-factory action-root="" actions="preference" separator="1" />
    </submenu>
    <submenu _label="_View">
      <menu-tearoff />
      <menu-factory action-root="" actions="dialog" />
      <menu-factory action-root="" actions="preference" separator="1" />
      <menu-factory action-root="" actions="rebuild" separator="1" />
    </submenu>
    <submenu _label="_Project">
      <menu-tearoff />
      <menu-factory action-root="" actions="playback" />
      <menu-factory action-root="" actions="project" separator="1" />
    </submenu>
    <submenu _label="_Synthesizers">
      <menu-tearoff />
      <menu-factory action-root="" actions="library-files" />
    </submenu>
    <submenu _label="_Tools">
      <menu-tearoff />
      <submenu _label="_Song" name="song-submenu" >
	<menu-factory action-root="" actions="tools-song" />
      </submenu>
      <submenu _label="_Synth" name="synth-submenu" >
	<menu-factory action-root="" actions="tools-synth" />
      </submenu>
      <submenu _label="Wave_s" name="waves-submenu" >
	<menu-factory action-root="" actions="tools-wave-repo" />
      </submenu>
      <menu-factory action-root="" actions="tools-project" />
    </submenu>
    <submenu _label="_Demo">
      <menu-tearoff />
      <menu-factory action-root="" actions="demo-songs" />
    </submenu>
    <submenu-last _label="_Help">
      <menu-tearoff />
      <menu-factory action-root="" actions="simple-help" />
      <submenu _label="Development">
	<menu-factory action-root="" actions="devel-help" />
      </submenu>
      <menu-factory action-root="" actions="about" separator="1" />
    </submenu-last>
  </xdef:beast-menubar>
  
  <!-- application-box -->
  <xdef:application-box inherit="border-layout" >
    <vbox name="menu-area" area="north" >
      <beast-menubar />
    </vbox>
    <vbox name="toolbar-area" area="north" />
    <left-deck name="main-notebook" pack:expand="1" />
    <hbox name="control-area" area="north" />
  </xdef:application-box>

</gxk-gadget-definitions>
