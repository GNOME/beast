@c emacs: -*-texinfo-*-

@c --- meta: macros used for macro definitions ---
@ifxml

@rmacro rawxml{XMLTEXT}
@xml
\XMLTEXT\@end xml
@end rmacro

@rmacro ifxmlelse{TEXT,TAG,CMD}
@rawxml{<\TAG\>}\TEXT\@rawxml{</\TAG\>}
@end rmacro

@end ifxml
@ifnotxml

@rmacro ifxmlelse{TEXT,TAG,CMD}
@\CMD\{\TEXT\}
@end rmacro

@end ifnotxml

@rmacro doublequote{TEXT}
"\TEXT\"
@end rmacro

@rmacro nop{TEXT}
@end rmacro


@c --- preformatted sections ---
@c WORKAROUND:
@c makeinfo-4.3 still mixes up <display> with <para> tags which
@c we can only circumvent by enclosing paragraphs in displaySTART
@c and displayEND
@rmacro displaySTART
@rawxml{<display>}
@end rmacro
@rmacro displayEND
@rawxml{</display>}
@end rmacro


@c --- accentuate phrases ---
@c --- WORKAROUND:
@c --- Below reproduction of standard @emph command is due to
@c --- a bug in makeinfo. If we do not define this macro,
@c --- the output of
@c ---    @chapter @emph{Emph} Text
@c --- is
@c ---    <chapter><title>Emph</title>Text...</chapter>
@c --- (notice the lack of space between Emph and Text.)
@ifxml
@rmacro emph{TEXT}
@rawxml{<emph>}\TEXT\@rawxml{</emph>}
@end rmacro
@rmacro code{TEXT}
@rawxml{<code>}\TEXT\@rawxml{</code>}
@end rmacro
@end ifxml

@c --- WORKAROUND:
@c --- @samp, @env, @file, @command and @option all generate
@c --- <code/> blocks. These macros hopefully will emulate the
@c --- expected behaviour.
@ifxml
@rmacro samp{TEXT}
@rawxml{<samp>}\TEXT\@rawxml{</samp>}
@end rmacro
@rmacro env{TEXT}
@rawxml{<env>}\TEXT\@rawxml{</env>}
@end rmacro
@rmacro file{TEXT}
@rawxml{<file>}\TEXT\@rawxml{</file>}
@end rmacro
@rmacro command{TEXT}
@rawxml{<command>}\TEXT\@rawxml{</command>}
@end rmacro
@rmacro option{TEXT}
@rawxml{<option>}\TEXT\@rawxml{</option>}
@end rmacro
@end ifxml

@rmacro important{TEXT}
@ifxmlelse{\TEXT\,important,strong}
@end rmacro


@c --- content markup ---
@rmacro path{TEXT}
@ifxmlelse{\TEXT\,file,file}
@end rmacro

@rmacro menupath{TEXT}
@ifxmlelse{\TEXT\,menupath,doublequote}
@end rmacro

@rmacro pagepath{TEXT}
@ifxmlelse{\TEXT\,pagepath,doublequote}
@end rmacro

@rmacro property{TEXT}
@ifxmlelse{\TEXT\,property,doublequote}
@end rmacro

@rmacro object{TEXT}
@ifxmlelse{<\TEXT\>,object,code}
@end rmacro

@rmacro channel{TEXT}
@ifxmlelse{\TEXT\,channel,code}
@end rmacro


@c --- table of contents ---
@c --- WORKAROUND:
@c --- Since makeinfo handles content tables itself for HTML and Info
@c --- outputs, we only need this for XML target. Kinda work-around.
@ifxml
@rmacro contents
@unnumbered Table Of Contents
@xml
<table-of-contents/>@end xml
@end rmacro
@end ifxml


@c --- revision bit ---
@c -- WORKAROUND:
@c -- If `@*' doesn't exist at the end of the line, makeinfo
@c -- misfills the first following paragraph.
@rmacro revision{TEXT}
@emph{\TEXT\} @value{TexiStamp}@*
@end rmacro


@c --- plain index, ie. no section title, etc. ---
@rmacro printplainindex{TEXT}
@ifxmlelse{\TEXT\,printplainindex,nop}
@end rmacro


@c --- news item title ---
@rmacro newsTitle{DATE, TITLE}
@ifxmlelse{\DATE\,news-date,nop}
@ifxmlelse{\TITLE\,news-title,nop}
@end rmacro


@c --- reference markup ---
@c --- WORKAROUND:
@c --- makeinfo formats the @deffn, @deftp, and similar
@c --- commands in a way unsuitable for XML. So we try to
@c --- reproduce their functionality
@rmacro refFunction{TEXT}
@ifxmlelse{\TEXT\,reference-function,nop}
@end rmacro
@rmacro refParameter{TEXT}
@ifxmlelse{\TEXT\,reference-parameter,nop}
@end rmacro
@rmacro refConstant{TEXT}
@ifxmlelse{\TEXT\,reference-constant,nop}
@end rmacro
@rmacro refType{TEXT}
@ifxmlelse{\TEXT\,reference-type,nop}
@end rmacro
@rmacro refReturns
@ifxmlelse{RETURNS:,reference-returns,nop}
@end rmacro
@rmacro refBlurb{TEXT}
@ifxmlelse{\TEXT\,reference-blurb,nop}
@end rmacro
@rmacro refStructType{TEXT}
@ifxmlelse{\TEXT\,reference-struct-type,nop}
@end rmacro
@rmacro refStructName{TEXT}
@ifxmlelse{\TEXT\,reference-struct-name,nop}
@end rmacro
@rmacro refStructOpen
@ifxmlelse{,reference-struct-open,nop}
@end rmacro
@rmacro refStructClose
@ifxmlelse{,reference-struct-close,nop}
@end rmacro

@c --- highlighting in ChangeLogs ---
@c --- date, time and author lines in titles
@rmacro clogentry{TEXT}
@ifxmlelse{\TEXT\,changelog-entry,code}
@end rmacro
@c --- this is for filenames that appear just next to the asterisks
@rmacro clogitem{TEXT}
@ifxmlelse{\TEXT\,changelog-item,file}
@end rmacro

@c --- document heading ---
@c --- WORKAROUND:
@c --- With these, we try to simulate the functionality of @titlepage, and
@c --- related commands, which don't seem to be supported in XML output
@rmacro doctitle{TEXT}
@ifxmlelse{\TEXT\,document-title,nop}
@end rmacro
@rmacro docauthor{TEXT}
@ifxmlelse{\TEXT\,document-author,nop}
@end rmacro
@rmacro docpackage{TEXT}
@ifxmlelse{\TEXT\,document-package,nop}
@end rmacro

@c --- document style ---
@rmacro docfont{TEXT}
@ifxmlelse{\TEXT\,document-font,nop}
@end rmacro
@c --- HTML specific document style ---
@rmacro navigation{TEXT}
@ifxmlelse{\TEXT\,document-navigation,nop}
@end rmacro
@rmacro hasbanner{TEXT}
@ifxmlelse{\TEXT\,document-hasbanner,nop}
@end rmacro


@c --- aliases ---
@rmacro module{TEXT}
@object{\TEXT\}
@end rmacro
@rmacro prop{TEXT}
@property{\TEXT\}
@end rmacro
@rmacro programlisting{TEXT}
@lisp
\TEXT\
@end lisp
@end rmacro


@c --- common names ---
@rmacro beast
@emph{BEAST}
@end rmacro

@rmacro beastlong
@strong{BE}devilled @strong{A}udio @strong{S}ys@strong{T}em
@end rmacro

@rmacro bse
@emph{BSE}
@end rmacro

@rmacro bselong
@strong{B}edevilled @strong{S}ound @strong{E}ngine
@end rmacro

@rmacro gsl
@emph{GSL}
@end rmacro

@rmacro beastbse
@emph{BEAST/BSE}
@end rmacro

@rmacro sfk
@emph{SFK}
@end rmacro

@rmacro arts
@emph{aRts}
@end rmacro
